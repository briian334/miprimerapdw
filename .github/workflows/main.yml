#NOMBRE DEL FLUJO DE TRABAJO (PIPELINE)
name: BuildRepositoryWorkFlow

on:
  #SERA EJECUTADO CUANDO SE HAGA UN PUSH A LAS SIGUIENTES RAMAS
  push:
    branches: ["main", "miRamita"]

  #VA EJECUTAR LOS SIGUIENTES TRABAJOS (PARA COMPILAR)
jobs:
  build:
    runs-on: ubuntu-latest #SE EJECUTA BAJO EL SO DE LINUX UBUNTU

    steps:
      #PASO POR DEFECTO (SE ENCARGA DE CLONAR EL REPOSITORIO ACTUAL EN EL RUNNER)
      - name: Clonar Repositorio
        uses: actions/checkout@v3
      
      #PASO PARA INSTALAR DEPENDENCIAS NECESARIAS
      - name: Instalar Dependencias
        run: npm install

      #PASO PARA ACTUALIZAR DEPENDENCIAS NECESARIAS
      - name: Actualizar Dependencias
        run: npm update

      #PASO PARA EJECUTAR LAS PRUEBAS
      - name: Ejecutar Pruebas Unitarias
        run: npm test
        
      #PASO PARA COMPILAR LA APLICACION
      - name: Compilar Artefactos
        run: npm run build

      #PASO PARA GUARDAR LOS ARCHIVOS COMPILADOS COMO ARTEFACTOS
      - name: Guardar Artefactos
        uses: actions/upload-artifact@v3
        with:
          name: my-app-artifacts
          path: dist/
